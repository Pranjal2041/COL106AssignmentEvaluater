## Unofficial Script for evaluating Assignments(1-3)

### Updates

* Now default is set to Assignment 3.
* New Test Cases which are smaller for faster inference. To test larger test file run `java DriverXtreme --large`.
* Show the command executed after which first difference in output files is found, for faster debugging.
* Show the command executed in case an error is thrown or program is stuck in loop.
* Add special test case for validating AVL implementation is faster than BST. To run on AVL use `java DriverXtreme --complex` and for BST use `java -Xss16m DriverXtreme --complex 2`. AVL should be atleast 100 times faster than BST for this case.

### How To Use

* Clone the repo or download the zip.
* Replace corresponding java files with your files.
* Run command `make clean` followed by `make all`. (Alternatively use `make run`).
* Run java DriverXtreme.
* Enter your first name and wait for some time. The program will automatically generate two named input files and generate 2 output files doing over 5 million operations. Then it will automatically compare your output from mine and display the result. Also note this program tests all 4 main functions(Free,Allocate,Defragment,Sanity)

### FAQ

* Q.) Program stuck in loop?
    A.) Ideally it should not take more than 1 minute to run the program. But if it does take it is possible that your algorithm in stuck in loop.(Note even if your getFirst and getNext is bugged the output will be different)
* Q.) My output is different?
    A.) In no way can I guarantee that the output files provided by me are correct. Nonetheless, I have tried to ensure that my output is correct. But if you are confident, that output files are incorrect, please open an issue. You can also compare your outputs with friends, by changing the appropriate files.
    
* Q.) Laptop getting overheated? A.) The large test case may be too big for your pc. You can change 3 variables viz. test_cases_lengths,test_cases_names,correct_outputs to evaluate only smaller test case(See Advanced section for more details).


### How does this Work?

Using a fixed random seed value the program generates two test cases. These cases are next evaluated.

#### Test Case:-
* The Allocate, Defragment are same as the official test cases.
* For Free operation the test case contains a large number(Order 10^7) call it x. Then the driver code traverses the whole allocBlk calculates the size of list, then calculates i = x%size and again iterating over tree finds the address of ith element.(Thus you need to make sure that your getNext and getFirst also works correctly). Then Free function is called on this found address. This ensures that Free function is actually applied on valid address.
* Sanity function is also called on both freeBlk,allocBlk in around 4% of all operations in a test case. If sanity detects issue in your freeBlk or allocBlk, same is displayed on console. In such a case you need to either fix sanity function or your other functions.

#### Report
* The Driver code is so designed that it keeps track of all important variables that may be helpful in case your output doesn't match. This includes time taken,freeBlk size, allocBlk size,input value,command... The ouput of this is saved in an .ser file. This file can be opened and compared using jupyter notebook which `ReportEvaluater.ipynb`. If youd don't know what jupyter notebooks are please see https://www.dataquest.io/blog/jupyter-notebook-tutorial/ . If you dont want to install jupyter you can use Binder  which runs jupyter notebook on cloud and is relatively fast. [![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/Pranjal2041/COL106AssignmentEvaluater/HEAD)



## For Advanced Users

The program is quite modular in its design, and can be used to generate different test cases in less number of time.

### Important Constants:-
1. `SEED`:- The program generates test cases randomly. But the how does it ensure that test cases generated by different users is same? Actually the random number generated is a pseudo-random number which performs a complex hash function on an input number. Mostly this input number is based on your system time in nano seconds or something similar, thus making it look random. But fixing the value of seed ensures that the same sequence is generated every time. You can change the SEED value if you wish, but just make sure that the output against which you are comparing was using the same seed.

2. `assign_num`:- Change this to evaluate a different assignment(Default is 2). Note:- You will also need to change `correct_outputs` for evaluation to work correctly for different assignment number.

3. `test_cases_lengths` & `test_cases_names` :- Contains number of test cases in a single input file and name of corr test case file. Change this for smaller or larger inputs. Note:- Since seed is not reset while creating a new file changing permutation of `test_cases_lengths` will change the corresponding output. Although for complex test case seed is reset, so it won't make a difference.

4. `correct_outputs`:- The names of corresponding correct output files against which your output will be checked. Comment this if you don't want to automatically evaluate your code.

5. `root_path`:- Change the root path of all files. Only useful if you are using some ide to run your code(As it may have a different root path set).

6. `generateReport`:- Enable it to use the best feature of this program (Just remember that this will take a lot of time to run). Stores time taken in each of your operations,can be used to pinpoint the exact command where your program went wrong and a lot more. I have released the accompanying jupyter notebook `ReportEvaluater.ipynb`. You can use it to explore your .ser file and importantly compare it with others.

### Argument parsing

To use enter these commands after java DriverXtreme. For example to invoke all arguments, type `java DriverXtreme --large --report 3`

* `--large` :- Use to enable large test case
* `--complex` :- Use to enable performance evaluation(i.e AVL is faster than BST) test case.
* `--report` :- Enables report generation
* assign_num :- Enter assignment number to check your code on (Default is 3).

There is still a lot more in this whole program than what this documentation has described. Just go through DriverXtreme.java to see details.

**NOTE:-** This in no way, ensures that your program is correct. This is only a set of randomly generated test cases, and may not include all corner cases.

Enjoy :)
